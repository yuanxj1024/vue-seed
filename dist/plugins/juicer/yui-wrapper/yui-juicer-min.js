YUI.add("juicer",function(e){var c=function(){var f=[].slice.call(arguments);f.push(c.options);if(arguments.length==1){return c.compile.apply(c,f);}if(arguments.length>=2){return c.to_html.apply(c,f);}};var d={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(f){return d.escapehash[f];},escaping:function(f){return typeof(f)!=="string"?f:f.replace(/[&<>"]/igm,this.escapereplace);},detection:function(f){return typeof(f)==="undefined"?"":f;}};var b=function(f){if(console){if(console.warn){console.warn(f);return;}if(console.log){console.log(f);return;}}throw (f);};var a=function(j,g){j=j!==Object(j)?{}:j;if(j.__proto__){j.__proto__=g;return j;}var h=function(){};var k=new ((h).prototype=g,h);for(var f in j){if(j.hasOwnProperty(f)){k[f]=j[f];}}return k;};c.__cache={};c.version="0.4.0-dev";c.settings={forstart:/{@each\s*([\w\.]*?)\s*as\s*(\w*?)\s*(,\s*\w*?)?}/igm,forend:/{@\/each}/igm,ifstart:/{@if\s*([^}]*?)}/igm,ifend:/{@\/if}/igm,elsestart:/{@else}/igm,elseifstart:/{@else if\s*([^}]*?)}/igm,interpolate:/\${([\s\S]+?)}/igm,noneencode:/\$\${([\s\S]+?)}/igm,inlinecomment:/{#[^}]*?}/igm,rangestart:/{@each\s*(\w*?)\s*in\s*range\((\d+?),(\d+?)\)}/igm};c.options={cache:true,strip:true,errorhandling:true,detection:true,_method:a({__escapehtml:d,__throw:b},this)};c.set=function(f,h){if(arguments.length===2){this.options[f]=h;return;}if(f===Object(f)){for(var g in f){if(f.hasOwnProperty(g)){this.options[g]=f[g];}}}};c.register=function(h,g){var f=this.options._method;if(f.hasOwnProperty(h)){return false;}return f[h]=g;};c.unregister=function(g){var f=this.options._method;if(f.hasOwnProperty(g)){return delete f[g];}};c.template=function(f){var g=this;this.options=f;this.__interpolate=function(h,l,j){var i=h.split("|"),k="";if(i.length>1){h=i.shift();k="_method."+i.shift();}return"<%= "+(l?"_method.__escapehtml.escaping":"")+"("+(!j||j.detection!==false?"_method.__escapehtml.detection":"")+"("+k+"("+h+"))) %>";};this.__removeShell=function(i,h){var j=0;i=i.replace(c.settings.forstart,function(o,l,n,m){var n=n||"value",m=m&&m.substr(1);var k="i"+j++;return"<% for(var "+k+"=0, l"+k+"="+l+".length;"+k+"<l"+k+";"+k+"++) {var "+n+"="+l+"["+k+"];"+(m?("var "+m+"="+k+";"):"")+" %>";}).replace(c.settings.forend,"<% } %>").replace(c.settings.ifstart,function(k,l){return"<% if("+l+") { %>";}).replace(c.settings.ifend,"<% } %>").replace(c.settings.elsestart,function(k){return"<% } else { %>";}).replace(c.settings.elseifstart,function(k,l){return"<% } else if("+l+") { %>";}).replace(c.settings.noneencode,function(l,k){return g.__interpolate(k,false,h);}).replace(c.settings.interpolate,function(l,k){return g.__interpolate(k,true,h);}).replace(c.settings.inlinecomment,"").replace(c.settings.rangestart,function(n,m,o,l){var k="j"+j++;return"<% for(var "+k+"=0;"+k+"<"+(l-o)+";"+k+"++) {var "+m+"="+k+"; %>";});if(!h||h.errorhandling!==false){i="<% try { %>"+i;i+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>';}return i;};this.__toNative=function(i,h){return this.__convert(i,!h||h.strip);};this.__lexicalAnalyze=function(k){var j=[];var n="";var m=function(q,p){if(Array.prototype.indexOf&&q.indexOf===Array.prototype.indexOf){return q.indexOf(p);}for(var o=0;o<q.length;o++){if(q[o]===p){return o;}}return -1;};var h=function(o,i){i=i.match(/\w+/igm)[0];if(m(j,i)===-1){j.push(i);}};k.replace(c.settings.forstart,h).replace(c.settings.interpolate,h).replace(c.settings.ifstart,h);for(var l=0;l<j.length;l++){n+="var "+j[l]+"=_."+j[l]+";";}return"<% "+n+" %>";};this.__convert=function(i,j){var h=[].join("");h+="'use strict';";h+="var _=_||{};";h+="var _out='';_out+='";if(j!==false){h+=i.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;";return h;}h+=i.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');";return h;};this.parse=function(i,h){var j=this;if(!h||h.loose!==false){i=this.__lexicalAnalyze(i)+i;}i=this.__removeShell(i,h);i=this.__toNative(i,h);this._render=new Function("_, _method",i);this.render=function(l,k){if(!k||k!==g.options._method){k=a(k,g.options._method);}return j._render.call(this,l,k);};return this;};};c.compile=function(g,f){if(!f||f!==this.options){f=a(f,this.options);}try{var h=this.__cache[g]?this.__cache[g]:new this.template(this.options).parse(g,f);if(!f||f.cache!==false){this.__cache[g]=h;}return h;}catch(i){b("Juicer Compile Exception: "+i.message);return{render:function(){}};}};c.to_html=function(g,h,f){if(!f||f!==this.options){f=a(f,this.options);}return this.compile(g,f).render(h,f._method);};e.juicer=c;},"0.4.0-dev");